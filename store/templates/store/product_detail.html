{% extends 'partials/_base.html' %}
{% load static %}
{% block title %}{{product.name}}{% endblock title %}

{% block body %}
<section class="section-content padding-y bg">
    <div class="container">
    
    <!-- ============================ COMPONENT 1 ================================= -->
    <div class="card">
        <div class="row no-gutters">
            <aside class="col-md-6">
    <article class="gallery-wrap"> 
        <div class="img-big-wrap">
           <a href="#"><img src="{{product.image_url}}"></a>
        </div> <!-- img-big-wrap.// -->
        
    </article> <!-- gallery-wrap .end// -->
            </aside>
            <main class="col-md-6 border-left">
    <article class="content-body">
    
    <h2 class="title">{{product.name}}</h2>
    
    <div class="mb-3"> 
        <h2 class="price h4">â‚¦{{product.price}}</h2> 
    </div> 
    
    <p>{{product.description}}</p>
    
    
    <hr>
    {% if not product.stock <= 0 %}

    <form method="post">
      {% csrf_token %}
      {% include 'partials/_form_errors.html' %}

        <div class="row">
          {% if product.available_colors.count >= 1%}
            <div class="item-option-select">
                <h6>Choose Color</h6>
                <div class="btn-group btn-group-sm btn-group-toggle" data-toggle="buttons">
                  {% comment %} {% for radio in form.color %} {% endcomment %}
                  {% for color in product.available_colors.all %}
                  <label class="btn btn-light">
                    {% comment %} {{radio}} {% endcomment %}
                    <input type="radio" name="color" required value="{{forloop.counter}}" class="form-control" id="id_size_{{forloop.counter}}">
                    {{color.name}}
                  </label>
                  {% endfor %}
                  {% comment %} <label class="btn btn-light"> {% endcomment %}
                  {% comment %} {% endfor %} {% endcomment %}

                </div> 
            </div>
          {% else %}
            <div class="btn-group btn-group-sm btn-group-toggle" data-toggle="buttons">
              {% for radio in form.color %}
              <label class="btn btn-light" for={# {{radio.id_for_label}} #}>
                <input type="radio" name="size" hidden class="choice">{# {{radio.choice_label}} #}
              </label>
              {% endfor %}

            </div> 
          {% endif %}
            
        </div> <!-- row.// -->

        <div class="row">
          {% if product.available_sizes.count >= 1 %}
            <div class="item-option-select">
                <h6>Select Size</h6>
                <div class="btn-group btn-group-sm btn-group-toggle" data-toggle="buttons">
                  
                  {% for size in product.available_sizes.all %}
                  <label class="btn btn-light">
                    {% comment %} {{radio}} {% endcomment %}
                    <input type="radio" name="size" required value="{{forloop.counter}}" class="form-control" id="id_size_{{forloop.counter}}">
                    {{size.name}}
                  </label>
                  {% endfor %}

                </div> 
            </div>
            {% else %}
            <div class="btn-group btn-group-sm btn-group-toggle" data-toggle="buttons">
              {% for radio in form.size %}
              <label class="btn btn-light">
                {{radio}}
              </label>
              {% endfor %}
            </div>         
            {% endif %}

        </div> <!-- row.// -->
        <input type="hidden" name="{{form.quantity.name}}" value="{{form.quantity.value}}" />
        <button class="btn btn-primary"> <span class="text">Add to cart</span> <i class="fas fa-shopping-cart"></i>  </button>
      </form>

        <hr>
        {% else %}
            <h5 class="text-danger">Out of stock</h5>
        {% endif %}
    </article> <!-- product-info-aside .// -->
            </main> <!-- col.// -->
        </div> <!-- row.// -->
    </div> <!-- card.// -->
    <!-- ============================ COMPONENT 1 END .// ================================= -->
    
    <br>
    
    <div class="row">
                <div class="col-md-9">
    
        <header class="section-heading">
            <h3>Customer Reviews </h3>  
            
        </header>
    
        <article class="box mb-3">
            <div class="icontext w-100">
                <img src="{% static 'images/avatars/avatar1.jpg' %}" class="img-xs icon rounded-circle">
                <div class="text">
                    <span class="date text-muted float-md-right">24.04.2020 </span>  
                    <h6 class="mb-1">Mike John </h6>
                    
                </div>
            </div> <!-- icontext.// -->
            <div class="mt-3">
                <p>
                    Dummy comment Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                    quis nostrud exercitation ullamco laboris nisi ut aliquip
                </p>	
            </div>
        </article>
    
        
    
        </div> <!-- col.// -->
    </div> <!-- row.// -->
    
    
    </div> <!-- container .//  -->
    </section>

{% endblock body %}
{% block scripts %}
      <script>
        document.addEventListener('DOMContentLoaded', (e) => {
          radioButton = document.querySelectorAll('.choice')
          if (radioButton.length > 0){
            radioButton.forEach((radio) => {
              radio.removeAttribute('required')
              console.log(worked)
            })
          } 
        })
          
      </script>
    {% endblock scripts %}